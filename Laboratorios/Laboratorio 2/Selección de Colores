#define F_CPU 16000000UL
#include <avr/io.h>
#include <util/delay.h>
#include <avr/interrupt.h>
#include <stdint.h>
#include <stdio.h>
#include <stdarg.h>
#include <string.h>

// HARDWARE 
#define PIN_WS_BIT   PD4          // WS2812 DIN en D4 
#define PIN_SERVO    PB1          // OC1A D9 
#define PIN_R        PD3          // OC2B D3 
#define PIN_G        PD5          // OC0B D5
#define PIN_B        PD6          // OC0A D6 
#define LDR_CH       0            // ADC0 / A0

#define WS_COUNT     64

// SERVO 
#define SERVO_MIN_US 500
#define SERVO_MAX_US 2400

// MUESTREO 
#define SAMPLES_PER_COLOR  20
#define SAMPLE_DELAY_MS     2
#define SAMPLES_AMBIENT    10
#define MIN_SUM_ADC        30u

// HUE / SAT 
#define SAT_MIN          28u
#define TOL_H_PRIM_DEG   28u
#define TOL_H_SEC_DEG    36u

// LED discreto 
#define RGB_COMMON_ANODE 0
static inline uint8_t lvl(uint8_t x){ return RGB_COMMON_ANODE ? (255-x) : x; }
static uint8_t levR=255, levG=255, levB=255;
static uint8_t RGB_LEVEL = 255;
